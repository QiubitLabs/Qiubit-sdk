<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Octra SDK Demo</title>
    <style>
        body { font-family: sans-serif; padding: 40px; background: #f4f7f6; }
        .card { background: white; padding: 24px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 500px; margin: auto; }
        button { background: #00ff9d; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-bottom: 10px; }
        pre { background: #eee; padding: 10px; border-radius: 4px; font-size: 12px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Octra SDK Demo</h2>
        <p id="status">Status: Not Connected</p>
        <button id="connectBtn">Connect Wallet</button>
        <button id="loginBtn" disabled>Sign In (Login)</button>
        <button id="sendBtn" disabled>Send 0.01 OCT</button>
        
        <h4>Log:</h4>
        <pre id="log">Ready...</pre>
    </div>

    <script type="module">
        // Import langsung dari source (untuk keperluan demo lokal)
        import octra, { utils } from '../src/index.js';

        const logEl = document.getElementById('log');
        const statusEl = document.getElementById('status');
        
        function log(msg) {
            logEl.textContent = msg + "\n" + logEl.textContent;
        }

        document.getElementById('connectBtn').onclick = async () => {
            try {
                log("Connecting...");
                const account = await octra.connect();
                statusEl.textContent = `Address: ${account.address}`;
                log("Connected: " + account.address);
                
                document.getElementById('loginBtn').disabled = false;
                document.getElementById('sendBtn').disabled = false;
            } catch (err) {
                log("Error: " + err.message);
            }
        };

        document.getElementById('loginBtn').onclick = async () => {
            try {
                log("Signing login message...");
                const data = await octra.signInWithOctra("Demo dApp");
                log("Signed! Signature: " + data.signature.substring(0, 30) + "...");
            } catch (err) {
                log("Sign Error: " + err.message);
            }
        };

        document.getElementById('sendBtn').onclick = async () => {
            try {
                log("Requesting transfer...");
                const result = await octra.sendTransaction({
                    to: "octHUymout6StEVAuU7DjCW5XmHnNbS8MsvoGBkMw1RsVyA",
                    amount: "0.01"
                });
                log("Sent! Hash: " + result.txHash);
            } catch (err) {
                log("Transfer Error: " + err.message);
            }
        };
    </script>
</body>
</html>
